<?xml version="1.0" encoding="utf-8" ?>
<!--
	LOTUS FOUNDATION KERNEL
-->
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/" xmlns:set="http://www.sitecore.net/xmlconfig/set/">
    <sitecore>
        <pipelines>
            <initialize>
                <!-- Hook into Sitecore for initialization -->
                <processor type="Lotus.Foundation.Kernel.Pipelines.Initialize.Initialize, Lotus.Foundation.Kernel" />
            </initialize>
        </pipelines>
        
        <settings>
            <!--
                KERNEL TOKENIZATION
                    Settings for the tokenization system
            -->
            <setting name="Lotus.Foundation.Kernel.Tokenization.TokenCharacters" value="[a-zA-Z0-9_]" />
            <setting name="Lotus.Foundation.Kernel.Tokenization.TokenElementCharacters" value="[a-zA-Z0-9._()]" />
            <setting name="Lotus.Foundation.Kernel.Tokenization.TokenContextKey" value="lotus-context-tokenizer" />
            <setting name="Lotus.Foundation.Kernel.Tokenization.TokenFormat" value="$({0})" />
            <setting name="Lotus.Foundation.Kernel.Tokenization.TokenElementFormat" value=".{0}" />
        </settings>

        <log4net>
            <appender name="Lotus.Foundation.Kernel.TokenAppender" type="Lotus.Foundation.Logging.Appenders.LotusLogFileAppender, Lotus.Foundation.Logging">
                <file value="$(dataFolder)/logs/Lotus.Foundation.Kernel.Token.{date}.txt" />
                <appendToFile value="true" />
                <layout type="log4net.Layout.PatternLayout">
                    <conversionPattern value="%4t %d{ABSOLUTE} %-5p %m%n" />
                </layout>
                <encoding value="utf-8" />
            </appender>
            <logger name="Lotus.Foundation.Kernel.TokenLogger" additivity="false">
                <level value="ALL"/>
                <appender-ref ref="Lotus.Foundation.Kernel.TokenAppender"/>
            </logger>
        </log4net>
        
        <lotus.kernel>
            <logging>
                <loggers>
                    <logger id="Lotus.Foundation.Kernel.TokenLogger" type="Lotus.Foundation.Logging.LotusLogger, Lotus.Foundation.Logging">
                        <param desc="id">$(id)</param>
                        <param desc="includeStacktrace">true</param>
                    </logger>
                </loggers>
            </logging>
        </lotus.kernel>
    </sitecore>
</configuration>